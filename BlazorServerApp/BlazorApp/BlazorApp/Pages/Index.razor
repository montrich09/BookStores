@page "/"
@using BlazorServerApp.Data
@using Blazored.LocalStorage
@inject NavigationManager navigationManager
@inject ILocalStorageService localStorageService

<h1>Hello, world!</h1>
<p>Welcome to your new app</p>

<AuthorizeView>
    <Authorized>
        <p>Welcome, @context.User.Identity.Name</p>
    </Authorized>
    <NotAuthorized>
        <p>You are signed out!!!</p>
    </NotAuthorized>
</AuthorizeView>

@*<Component1></Component1>*@

@code {

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        var accessToken = await localStorageService.GetItemAsync<string>("accessToken");

        if (accessToken == null)
            navigationManager.NavigateTo("/login");
    }
}